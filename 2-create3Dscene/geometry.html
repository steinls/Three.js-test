<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>三角片面几何</title>
	<script src="../libs/three.js"></script>
	<script src="../libs/jquery.2.2.2.js"></script>
	<style>
		body{
			overflow: hidden;
		}
	</style>
</head>
<body>
	<div class="webgl"></div>
	<script>
		$(function(){
			var scene,camera,renderer;
			function init() {
				scene = new THREE.Scene();

				camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);
				camera.position.set(-50,30,20);
				camera.lookAt(new THREE.Vector3(-10,0,0));

				renderer = new THREE.WebGLRenderer();
				renderer.setSize(window.innerWidth,window.innerHeight);
				renderer.setClearColor(new THREE.Color(0xEEEEEE,1.0));
				renderer.shadowMapEnabled = true;
				$('.webgl').append(renderer.domElement);
			}

			function render() {
				requestAnimationFrame(render);
				renderer.render(scene,camera);
			}

			function addObject() {
				var planeGeometry = new THREE.PlaneGeometry(60,40,1,1);
				var planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});
				var plane = new THREE.Mesh(planeGeometry,planeMaterial);
				plane.receiveShadow = true;
				plane.rotation.x = -0.5*Math.PI;
				plane.position.set(0,0,0);
				scene.add(plane);


				var geoms = [];
				// 圆柱几何
				geoms.push(new THREE.CylinderGeometry(1,4,4));
				// 方块
				geoms.push(new THREE.BoxGeometry(2,2,2));
				// 球体
				geoms.push(new THREE.SphereGeometry(2));
				// 20面体
				geoms.push(new THREE.IcosahedronGeometry(4));
				// 使用点集合创建凸几何
				var points = [
					new THREE.Vector3(2,2,2),
					new THREE.Vector3(2,2,-2),
					new THREE.Vector3(-2,2,-2),
					new THREE.Vector3(-2,2,2),
					new THREE.Vector3(2,-2,2),
					new THREE.Vector3(2,-2,-2),
					new THREE.Vector3(-2,-2,-2),
					new THREE.Vector3(-2,-2,2),
				];
				geoms.push(new THREE.ConvexGeometry(points));
				

				// 遍历创建
				for(var i = 0;i<geoms.length;i++){
					var material = [
					new THREE.MeshLambertMaterial({color:Math.random()*0xffffff,shading:THREE.FlatShading}),
					new THREE.MeshBasicMaterial({color:0x000000,wireframe:true})
					];

					var mesh = THREE.SceneUtils.createMultiMaterialObject(geoms[i],materials);
					
				}
			}

			function initLight() {
				var ambientLight = new THREE.AmbientLight(0x090909);
				scene.add(ambientLight);

				var spotLight = new THREE.SpotLight(0xffffff);
				spotLight.castShadow = true;
				spotLight.position.set(-40,40,50);
				scene.add(spotLight);
			}


			init();
			addObject();
			initLight();
			render();
		});
	</script>
</body>
</html>