<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="../libs/three.js"></script>
	<script src="../libs/stats.js"></script>
	<script src="../libs/jquery.2.2.2.js"></script>
	<style>
		#stats-output{
			position: absolute;
			left: 0;
			top: 0;
		}
	</style>
</head>
<body>
	<div id="webgl-output"></div>
	<div id="stats-output"></div>
	<script>
		var scene,camera,renderer;
		var stats;

		function init() {
			// 场景负责：保存，跟踪，添加到里面的对象。
			scene = new THREE.Scene();

			// 相机负责：决定你所能看到的场景
			camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);
			camera.position.x = -30;
			camera.position.y = 40;
			camera.position.z = 30;
			camera.lookAt(scene.position);

			// 渲染器：计算指定相机角度下浏览器呈现的场景
			renderer = new THREE.WebGLRenderer();
			// 设置背景颜色
			renderer.setClearColor(new THREE.Color(0xEEEEEE));
			// 设置渲染器大小
			renderer.setSize(window.innerWidth,window.innerHeight);
			// 将渲染器的输出添加到html元素
			document.getElementById('webgl-output').appendChild(renderer.domElement);

		}
		function addObject() {

			// 在屏幕上显示轴
			var axes = new THREE.AxisHelper(20);
			scene.add(axes);

			// 添加物体
			// 创建一个宽60，高20的平面
			var planeGeometry = new THREE.PlaneGeometry(60,20);
			// 
			var planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});
			var plane = new THREE.Mesh(planeGeometry,planeMaterial);
			plane.rotation.x = -0.5 * Math.PI;
			plane.position.x = 15;
			plane.position.y = 0;
			plane.position.z = 0;

			scene.add(plane);


			// 添加方块
			var cubeGeometry = new THREE.BoxGeometry(4,4,4);
			var cubeMaterial = new THREE.MeshLambertMaterial({color:0xff0000});
			var cube = new THREE.Mesh(cubeGeometry,cubeMaterial);
			// 设置方块定位
			cube.position.x = -4;
			cube.position.y = 3;
			cube.position.z = 0;
			// 设置名称
			cube.name = 'cube';
			// 加入场景
			scene.add(cube);



			// 添加球体
			var sphereGeometry = new THREE.SphereGeometry(4,20,20);
			var sphereMaterial = new THREE.MeshLambertMaterial({color:0x7777ff});
			var sphere = new THREE.Mesh(sphereGeometry,sphereMaterial);
			sphere.position.x = 20;
			sphere.position.y = 4;
			sphere.position.z = 2;
			scene.add(sphere);


			// 添加光源
			var spotLight = new THREE.SpotLight(0xffffff);
			spotLight.position.set(-40,60,-10);
			scene.add(spotLight);


		};

		function initStats() {
			stats = new Stats();
			// 0:fps(监听1秒内渲染帧数)。1:渲染时间
			stats.setMode(0);
			$('#stats-output').append(stats.domElement);
		}

		function render() {
			stats.update();
			scene.getObjectByName('cube').rotation.x += 0.02;
			scene.getObjectByName('cube').rotation.y += 0.02;
			scene.getObjectByName('cube').rotation.z += 0.02;
			requestAnimationFrame(render);
			renderer.render(scene,camera);
		}


		onload = function() {
			init();
			initStats();
			addObject();
			render();
		};
	</script>
</body>
</html>